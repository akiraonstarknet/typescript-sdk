{"version":3,"file":"testing.cjs","sources":["../src/testing.ts"],"sourcesContent":["import type { VcrResult } from \"@apibara/indexer/testing\";\nimport type { PgDatabase, PgQueryResultHKT } from \"drizzle-orm/pg-core\";\nimport { DRIZZLE_STORAGE_DB_PROPERTY } from \"./constants\";\n\nexport function getTestDatabase(context: VcrResult) {\n  const db = context[DRIZZLE_STORAGE_DB_PROPERTY];\n\n  if (!db) {\n    throw new Error(\"Drizzle database not found in context\");\n  }\n\n  return db as PgDatabase<PgQueryResultHKT>;\n}\n"],"names":["DRIZZLE_STORAGE_DB_PROPERTY"],"mappings":";;;;AAIO,SAAS,gBAAgB,OAAoB,EAAA;AAClD,EAAM,MAAA,EAAA,GAAK,QAAQA,qCAA2B,CAAA,CAAA;AAE9C,EAAA,IAAI,CAAC,EAAI,EAAA;AACP,IAAM,MAAA,IAAI,MAAM,uCAAuC,CAAA,CAAA;AAAA,GACzD;AAEA,EAAO,OAAA,EAAA,CAAA;AACT;;;;"}